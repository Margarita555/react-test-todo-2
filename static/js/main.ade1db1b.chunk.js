(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},44:function(t,e,n){},63:function(t,e,n){},69:function(t,e,n){"use strict";n.r(e);var c=n(1),s=n.n(c),a=n(34),i=n.n(a),o=(n(41),n(24)),l=n(8),r=n(14),d=n(18),j=(n(42),n(19)),u=n.n(j),b=n(0),h=function(t){var e=t.color,n=t.onClick,c=t.className;return Object(b.jsx)("i",{onClick:n,className:u()("badge",Object(d.a)({},"badge--".concat(e),e),c)})},m=n.p+"static/media/cross.d1aeab96.svg",f=(n(44),n(4)),O=n.n(f),v="https://my-json-server.typicode.com/margarita555/react-test-todo-2";var k=function(t){var e=t.items,n=t.isRemovable,c=t.onClick,s=t.onRemove,a=t.activeItem,i=t.onClickItem;return Object(b.jsx)("ul",{onClick:c,className:"list",children:e.map((function(t,e){return Object(b.jsxs)("li",{className:u()(t.className,{active:t.active?t.active:a&&a.id===t.id}),onClick:i?function(){return i(t)}:null,children:[Object(b.jsx)("i",{children:t.icon?t.icon:Object(b.jsx)(h,{color:t.color.name})}),Object(b.jsxs)("span",{children:[t.name,t.tasks&&t.tasks.length>0&&"(".concat(t.tasks.length,")")]}),n&&Object(b.jsx)("img",{onClick:function(){return function(t){O.a.delete("".concat(v,"/lists/")+t.id).then((function(){s(t.id)}))}(t)},className:"list__remove-icon",src:m,alt:"Remove icon"})]},e)}))})},p=(n(63),n.p+"static/media/close.b3bfafce.svg"),x=function(t){var e=t.colors,n=t.onAdd,s=Object(c.useState)(!1),a=Object(l.a)(s,2),i=a[0],o=a[1],d=Object(c.useState)(3),j=Object(l.a)(d,2),u=j[0],m=j[1],f=Object(c.useState)(""),x=Object(l.a)(f,2),C=x[0],g=x[1],w=Object(c.useState)(!1),N=Object(l.a)(w,2),_=N[0],L=N[1];Object(c.useEffect)((function(){Array.isArray(e)&&m(e[0].id)}),[e]);var T=function(){o(!1),g(""),m(e[0].id)};return Object(b.jsxs)("div",{className:"add-list",children:[Object(b.jsx)(k,{onClick:function(){return o(!0)},items:[{className:"list__add-button",icon:Object(b.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("path",{d:"M8 1V15",stroke:"#B4B4B4",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(b.jsx)("path",{d:"M1 8H15",stroke:"#B4B4B4",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"}]}),i&&Object(b.jsxs)("div",{className:"add-list__popup",children:[Object(b.jsx)("img",{onClick:T,className:"add-list__popup-close-btn",src:p,alt:"cross"}),Object(b.jsx)("input",{onChange:function(t){return g(t.target.value)},className:"field",value:C,type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430"}),Object(b.jsx)("div",{className:"add-list__popup-colors",children:e.map((function(t){return Object(b.jsx)(h,{onClick:function(){return m(t.id)},color:t.name,className:u===t.id&&"active"},t.id)}))}),Object(b.jsx)("button",{onClick:function(){C?(O.a.delete("".concat(v,"/lists"),{name:"ss",colorId:"blue",id:7}).then((function(t){var e=t.data;console.log(e)})),L(!0),O.a.post("".concat(v,"/lists"),{name:C,colorId:u}).then((function(t){var c=t.data,s=e.find((function(t){return t.id===u})),a=Object(r.a)(Object(r.a)({},c),{},{color:s,tasks:[]});n(a),T()})).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u043f\u0438\u0441\u043a\u0430")})).finally((function(){L(!1)}))):alert("Enter the name")},className:"button",children:_?"Loading...":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},C=(n(22),n.p+"static/media/edit.83c2f913.svg"),g=n.p+"static/media/add.e6004eac.svg";function w(t){var e=t.list,n=t.onAddTask,s=Object(c.useState)(!1),a=Object(l.a)(s,2),i=a[0],o=a[1],r=Object(c.useState)(""),d=Object(l.a)(r,2),j=d[0],u=d[1],h=Object(c.useState)(!1),m=Object(l.a)(h,2),f=m[0],k=m[1],p=function(){o(!i),u("")};return Object(b.jsx)("div",{className:"tasks__form",children:i?Object(b.jsxs)("div",{className:"tasks__form-block",children:[Object(b.jsx)("input",{onChange:function(t){return u(t.target.value)},value:j,className:"field",type:"text",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438"}),Object(b.jsx)("button",{onClick:function(){console.log(e.id);var t={listId:e.id,text:j,completed:!1};k(!0),O.a.post("".concat(v,"/tasks"),t).then((function(t){console.log(t),n(e.id,t.data),p()})).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u0434\u0430\u0447\u0438")})).finally((function(){k(!1)}))},className:"button",disabled:f,children:f?"Loading...":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"}),Object(b.jsx)("button",{onClick:p,className:"button button--grey",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]}):Object(b.jsxs)("div",{onClick:p,className:"tasks__form-new",children:[Object(b.jsx)("img",{src:g,alt:"Add icon"}),Object(b.jsx)("span",{children:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430"})]})})}var N=function(t){var e=t.id,n=t.text,c=t.completed,s=t.list,a=t.onRemove,i=t.onEdit,o=t.onComplete;return Object(b.jsxs)("div",{className:"tasks__items-row",children:[Object(b.jsxs)("div",{className:"checkbox",children:[Object(b.jsx)("input",{onChange:function(t){o(s.id,e,t.target.checked)},id:"task-".concat(e),type:"checkbox",checked:c}),Object(b.jsx)("label",{htmlFor:"task-".concat(e),children:Object(b.jsx)("svg",{width:"11",height:"8",viewBox:"0 0 11 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{d:"M9.29999 1.20001L3.79999 6.70001L1.29999 4.20001",stroke:"#B3B3B3",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),Object(b.jsx)("p",{children:n}),Object(b.jsxs)("div",{className:"tasks__items-row-actions",children:[Object(b.jsx)("div",{onClick:function(){return i(s.id,{id:e,text:n})},children:Object(b.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{d:"M0 12.0504V14.5834C0 14.8167 0.183308 15 0.41661 15H2.9496C3.05792 15 3.16624 14.9583 3.24123 14.875L12.34 5.78458L9.21542 2.66001L0.124983 11.7504C0.0416611 11.8338 0 11.9337 0 12.0504ZM14.7563 3.36825C14.8336 3.29116 14.8949 3.1996 14.9367 3.0988C14.9785 2.99801 15 2.88995 15 2.78083C15 2.6717 14.9785 2.56365 14.9367 2.46285C14.8949 2.36205 14.8336 2.27049 14.7563 2.19341L12.8066 0.24367C12.7295 0.166428 12.638 0.105146 12.5372 0.0633343C12.4364 0.021522 12.3283 0 12.2192 0C12.1101 0 12.002 0.021522 11.9012 0.0633343C11.8004 0.105146 11.7088 0.166428 11.6318 0.24367L10.107 1.76846L13.2315 4.89304L14.7563 3.36825V3.36825Z",fill:"black"})})}),Object(b.jsx)("div",{onClick:function(){return a(s.id,e)},children:Object(b.jsx)("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{d:"M6.87215 5.5L10.7129 1.65926C10.8952 1.47731 10.9977 1.23039 10.9979 0.972832C10.9982 0.715276 10.8961 0.468178 10.7141 0.285898C10.5321 0.103617 10.2852 0.00108525 10.0277 0.000857792C9.77011 0.000630336 9.52302 0.102726 9.34074 0.284685L5.5 4.12542L1.65926 0.284685C1.47698 0.102404 1.22976 0 0.971974 0C0.714191 0 0.466965 0.102404 0.284685 0.284685C0.102404 0.466965 0 0.714191 0 0.971974C0 1.22976 0.102404 1.47698 0.284685 1.65926L4.12542 5.5L0.284685 9.34074C0.102404 9.52302 0 9.77024 0 10.028C0 10.2858 0.102404 10.533 0.284685 10.7153C0.466965 10.8976 0.714191 11 0.971974 11C1.22976 11 1.47698 10.8976 1.65926 10.7153L5.5 6.87458L9.34074 10.7153C9.52302 10.8976 9.77024 11 10.028 11C10.2858 11 10.533 10.8976 10.7153 10.7153C10.8976 10.533 11 10.2858 11 10.028C11 9.77024 10.8976 9.52302 10.7153 9.34074L6.87215 5.5Z",fill:"black"})})})]})]})},_=n(11);function L(t){var e=t.list,n=t.onEditTitle,c=t.onAddTask,s=t.onRemoveTask,a=t.onEditTask,i=t.onTaskComplete;return Object(b.jsxs)("div",{className:"tasks",children:[Object(b.jsx)(_.b,{to:"/lists/".concat(e.id),style:{textDecoration:"none"},children:Object(b.jsxs)("h2",{style:{color:e.color.hex},className:"tasks__title",children:[e.name,Object(b.jsx)("img",{onClick:function(){var t=window.prompt("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430",e.name);t&&(n(e.id,t),O.a.patch("".concat(v,"/lists/")+e.id,{name:t}).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430")})))},src:C,alt:"Edit icon"})]})}),Object(b.jsxs)("div",{className:"tasks__items",children:[console.log(e.tasks),e.tasks&&!e.tasks.length&&Object(b.jsx)("h2",{children:"\u0417\u0430\u0434\u0430\u0447\u0438  \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"}),e.tasks&&e.tasks.map((function(t){return Object(b.jsx)(N,Object(r.a)({list:e,onRemove:s,onEdit:a,onComplete:i},t),t.id)})),Object(b.jsx)(w,{list:e,onAddTask:c},e.id)]})]})}var T=n(2);var y=function(){var t=Object(c.useState)(null),e=Object(l.a)(t,2),n=e[0],s=e[1],a=Object(c.useState)(null),i=Object(l.a)(a,2),r=i[0],d=i[1],j=Object(c.useState)(null),u=Object(l.a)(j,2),h=u[0],m=u[1],f=Object(T.e)(),p=Object(T.f)();console.log(p),Object(c.useEffect)((function(){O.a.get("".concat(v,"/lists?_expand=color&_embed=tasks")).then((function(t){var e=t.data;s(e)})),O.a.get("".concat(v,"/colors")).then((function(t){var e=t.data;d(e)}))}),[]);var C=function(t,e){var c=n.map((function(n){return n.id===t&&(n.tasks=[].concat(Object(o.a)(n.tasks),[e])),n}));s(c)},g=function(t,e){var c=n.map((function(n){return n.id===t&&(n.name=e),n}));s(c)};Object(c.useEffect)((function(){var t=f.location.pathname.split("lists/")[1];if(n){var e=n.find((function(e){return e.id===Number(t)}));m(e)}}),[n,f.location.pathname]);var w=function(t,e){console.log(e),console.log(e.id);var c=window.prompt("\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438:",e.text);if(c){var a=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.map((function(t){return t.id===e.id&&(t.text=c),t}))),n}));s(a),console.log(e.id),console.log(c),O.a.patch("".concat(v,"/tasks/")+e.id,{text:c}).catch((function(){alert("Error. The task was not saved. Try again")}))}},N=function(t,e){if(window.confirm("Do you really want to remove the task?")){var c=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.filter((function(t){return t.id!==e}))),n}));s(c),O.a.delete("".concat(v,"/tasks/")+e).catch((function(){alert("Error. The task was not deleted")}))}},_=function(t,e,c){console.log(c);var a=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.map((function(t){return t.id===e&&(t.completed=c),t}))),n}));s(a),O.a.patch("".concat(v,"/tasks/")+e,{completed:c}).catch((function(){alert("Error. The state of the checked task was not saved. Try again")}))};return Object(b.jsxs)("div",{className:"todo",children:[Object(b.jsxs)("div",{className:"todo__sidebar",children:[Object(b.jsx)(k,{onClickItem:function(t){f.push("/")},items:[{icon:Object(b.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{d:"M10.96 5.10001H5.74001C5.24321 5.10001 5.20001 5.50231 5.20001 6.00001C5.20001 6.49771 5.24321 6.90001 5.74001 6.90001H10.96C11.4568 6.90001 11.5 6.49771 11.5 6.00001C11.5 5.50231 11.4568 5.10001 10.96 5.10001ZM12.76 9.60001H5.74001C5.24321 9.60001 5.20001 10.0023 5.20001 10.5C5.20001 10.9977 5.24321 11.4 5.74001 11.4H12.76C13.2568 11.4 13.3 10.9977 13.3 10.5C13.3 10.0023 13.2568 9.60001 12.76 9.60001ZM5.74001 2.40001H12.76C13.2568 2.40001 13.3 1.99771 13.3 1.50001C13.3 1.00231 13.2568 0.600006 12.76 0.600006H5.74001C5.24321 0.600006 5.20001 1.00231 5.20001 1.50001C5.20001 1.99771 5.24321 2.40001 5.74001 2.40001ZM2.86001 5.10001H1.24001C0.743212 5.10001 0.700012 5.50231 0.700012 6.00001C0.700012 6.49771 0.743212 6.90001 1.24001 6.90001H2.86001C3.35681 6.90001 3.40001 6.49771 3.40001 6.00001C3.40001 5.50231 3.35681 5.10001 2.86001 5.10001ZM2.86001 9.60001H1.24001C0.743212 9.60001 0.700012 10.0023 0.700012 10.5C0.700012 10.9977 0.743212 11.4 1.24001 11.4H2.86001C3.35681 11.4 3.40001 10.9977 3.40001 10.5C3.40001 10.0023 3.35681 9.60001 2.86001 9.60001ZM2.86001 0.600006H1.24001C0.743212 0.600006 0.700012 1.00231 0.700012 1.50001C0.700012 1.99771 0.743212 2.40001 1.24001 2.40001H2.86001C3.35681 2.40001 3.40001 1.99771 3.40001 1.50001C3.40001 1.00231 3.35681 0.600006 2.86001 0.600006Z",fill:"#7C7C7C"})}),name:"\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",active:"/"===f.location.pathname}]}),n?Object(b.jsx)(k,{items:n,onRemove:function(t){var e=n.filter((function(e){return e.id!==t}));s(e)},onClickItem:function(t){f.push("/lists/".concat(t.id))},activeItem:h,isRemovable:!0}):"Loading",Object(b.jsx)(x,{onAdd:function(t){var e=[].concat(Object(o.a)(n),[t]);s(e)},colors:r})]}),Object(b.jsxs)("div",{className:"todo__tasks",children:[Object(b.jsxs)(T.a,{exact:!0,path:"/",children:["\u0412\u0441\u0435 \u0441\u043f\u0438\u0441\u043a\u0438:",n&&n.map((function(t){return Object(b.jsx)(L,{list:t,onEditTitle:g,onAddTask:C,onRemoveTask:N,onEditTask:w,onTaskComplete:_},t.id)}))]}),Object(b.jsx)(T.a,{path:"/lists/:id",children:n&&h&&Object(b.jsx)(L,{list:h,onEditTitle:g,onAddTask:C,onRemoveTask:N,onEditTask:w,onTaskComplete:_})})]})]})},E=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),c(t),s(t),a(t),i(t)}))};i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(_.a,{children:Object(b.jsx)(y,{})})}),document.getElementById("root")),E()}},[[69,1,2]]]);
//# sourceMappingURL=main.ade1db1b.chunk.js.map